<!DOCTYPE HTML> 
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymelefa.org/thmeleaf-extras-springsecurity3">


<head th:fragment="head">
	<meta charset="UTF-8" />
	<title th:text="#{head.title}"></title>
	<link rel="shortcut icon" th:href="@{/static/img/favicon.gif}" type="image/gif" />
	<link rel="icon" th:href="@{/static/img/favicon.gif}" type="image/gif" />
    <link rel="stylesheet" th:href="@{/static/css/desktop-main.css}" />
	<script th:src="@{/static/js/jquery-1.9.1.min.js}"></script>
	<script th:src="@{/static/js/countdown_v1.0.0/countdown.js}"></script>
</head>


<body>


	<script th:fragment="g-analytics">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-40321098-1', 'porra.jutge.org');
	ga('send', 'pageview');
	</script>
	

	<!-- Capsalera -->
   	<header id="main-header" th:fragment="header">
   	<script th:substituteby="desktop/fragments::g-analytics"></script>
   	<script th:inline="javascript">
   	/*<![CDATA[*/
   	//-----------------------------------------------------------------
   	// common-use formatting functions
   	//-----------------------------------------------------------------
   	function wrapMessage(message, opening, ending) {
		return opening + message + ending;
	}
   	function produceFormattedMessage(message, args, opening, ending) {
		var i = 0;
		return message.replace(/{.+?}/g, function() { return wrapMessage(args[i++], opening, ending); });
	}
   	function produceOSBMessage(message, args) {
   		return produceFormattedMessage(message, args, "<span class='o-s-b'>", "</span>");
	}
   	function produceOSMessage(message, args) {
   		return produceFormattedMessage(message, args, "<span class='o-s'>", "</span>");
	}
   	function produceWSMessage(message, args) {
   		return produceFormattedMessage(message, args, "<span class='w-s'>", "</span>");
	}
   	function produceUnformattedMessage(message, args) {
   		return produceFormattedMessage(message, args, "", "");
	}
   	/**
   	//-----------------------------------------------------------------
   	// vars
   	//-----------------------------------------------------------------
   	var mainSection, mainSectionHeight, mainHeaderHeight, mainFooterHeight;
   	var availableHeightForMainSection, availableHeightForMainSectionTimeout;
  	//-----------------------------------------------------------------
   	// viewport resize handlers
   	//-----------------------------------------------------------------
   	function resizeHandlerInternal(ahfms) {
   		var ahfms = $(window).height() - mainHeaderHeight - mainFooterHeight - 40;
   		if (mainSectionHeight < ahfms) mainSection.height(ahfms);
   	}
 	function windowResizeHandler() {
 	 	resizeHandlerInternal(availableHeightForMainSection);
   		setTimeout(function() { resizeHandlerInternal(availableHeightForMainSectionTimeout); }, 150);
   	}
   	//-----------------------------------------------------------------
   	// initialize
   	//-----------------------------------------------------------------
   	function initHeaderVars() {
		mainSection = $('#main-section');
		mainSectionHeight = mainSection.height();
		mainHeaderHeight = $('#main-header').height();
		mainFooterHeight = $('#main-footer').height();
   	}
   	//-----------------------------------------------------------------
   	// set resize handler + fake resize to repaint ui
   	//-----------------------------------------------------------------
   	$(document).ready(function() {
		$(window).resize(windowResizeHandler);
		windowResizeHandler();
	});
   	*/
   	/*]]>*/
   	</script>
	<div class="t-block">
		<div id="p-title"><a th:href="@{/}"><img th:src="@{/static/img/p-title.png}" th:alt="#{view.alt.title}" /></a></div>
		<div id="head-uni-links" >
			<div id="upc-logo"><a href="http://www.upc.es" target="_blank"><img th:src="@{/static/img/Logo_UPC.gif}" th:alt="#{view.alt.logoUPC}" /></a></div>
			<div id="fib-logo"><a href="http://www.fib.upc.edu" target="_blank"><img th:src="@{/static/img/Logo_FIB.gif}" th:alt="#{view.alt.logoFIB}" /></a></div>
		</div>
		<div id="fb-root"></div>
		<div id="head-links"><div><a href="https://battle-royale.jutge.org/" target="_blank"><img th:src="@{/static/img/rjutge.png}" th:alt="#{view.alt.gameJutge}" /></a></div></div>
		<div id="head-links">
			<script>
			(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1";
			fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));</script>
			<div class="fb-like" data-send="false" data-layout="button_count" data-width="100" data-show-faces="true"></div>
			<div class="t-b-m-a"><a href="https://twitter.com/share" class="twitter-share-button" data-lang="es">Tweet</a></div>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
			<div class="g-plusone" data-size="medium"></div>
			<script>
			window.___gcfg = {lang: 'es'};
			(function() {
			var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
			po.src = 'https://apis.google.com/js/plusone.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
			})();
			</script>
		</div>
	</div>
   	</header>
   	
   	
   	
   	
   	<section id="m-block-left" th:fragment="blockLeft">
	   	<script th:inline="javascript">
	   	/*<![CDATA[*/
	   	//-----------------------------------------------------------------
	   	// News (aka. league stats)
	   	//-----------------------------------------------------------------
	   	var leagueStatsStr, leagueInfoStr;
	   	var tidx, midx, newsUpdatesScroller, newsUpdates;
	   	function initInfoNewsVars() {
	   		leagueStatsStr = /*[[${defaultLeagueStats}]]*/;
	   		leagueInfoStr = /*[[${defaultLeagueInfo}]]*/;
	   		newsUpdatesScroller = $('#news-updates');
	   	}
	   	function refreshNews() {
	   		newsUpdates = [];
	   		var leagueStats = jQuery.parseJSON(leagueStatsStr);
	   		for (var index in leagueStats) {
	   			var leagueInfoBlock = leagueStats[index];
	   			var message = produceOSBMessage(leagueInfoBlock.message, leagueInfoBlock.args);
	   			newsUpdates.push(message);
	   		}
	   		tidx = 0; midx = newsUpdates.length;
	   	}
	   	function initTextScroller() {
  	 		newsUpdatesScroller.html(newsUpdates[tidx]);
  	 		newsUpdatesScroller.bind('marquee', function() {
	   	        var tw = newsUpdatesScroller.width();
	   	        var ww = newsUpdatesScroller.parent().width();
	   	     	newsUpdatesScroller.css({ right: -tw });
	   	  		newsUpdatesScroller.animate({ right: ww }, 15000, 'linear', function() {
	   	        	tidx++;
	   	        	if (tidx >= midx) tidx = 0;
	   	        	newsUpdatesScroller.html(newsUpdates[tidx]);
	   	        	newsUpdatesScroller.trigger('marquee');
	   	        });
	   	    }).trigger('marquee');
  	 	}
	   	//-----------------------------------------------------------------
	   	// league info
	   	//-----------------------------------------------------------------
	   	function refreshInfo() {
	   		var leagueInfo = jQuery.parseJSON(leagueInfoStr);
	   		for (var index in leagueInfo) {
	   			var leagueInfoBlock = leagueInfo[index];
	   			var message = produceOSMessage(leagueInfoBlock.message, leagueInfoBlock.args);
	   			$("#" + leagueInfoBlock.name).html(message);
	   		}
	   	}
	   	//-----------------------------------------------------------------
	   	// set up
	   	//-----------------------------------------------------------------
	   	$(document).ready(function() {
	   		initInfoNewsVars();
	   		refreshInfo();
	   		refreshNews();
  	 		initTextScroller();
	   	});
	   	/*]]>*/
	   	</script>
   		<aside id="main-left-box">
   		<div class="p-7">
   			<div><span class="large-text" id="round"></span></div>
   			<div class="p-t-20"><div><span class="large-text" id="survivors"></span></div></div>
   			<div class="p-t-10"><div><span class="large-text" id="killed"></span></div></div>
   			<div id="plf-00" class="prl"></div><div id="plf-01" class="prl"></div><div id="plf-02" class="prl"></div><div id="plf-10" class="prl"></div><div id="plf-11" class="prl"></div><div id="plf-12" class="prl"></div><div id="plf-20" class="prl"></div><div id="plf-21" class="prl"></div><div id="plf-22" class="prl"></div><div id="plf-30" class="prl"></div><div id="plf-31" class="prl"></div><div id="plf-32" class="prl"></div><div id="plf-40" class="prl"></div><div id="plf-41" class="prl"></div><div id="plf-42" class="prl"></div><div id="plf-50" class="prl"></div><div id="plf-51" class="prl"></div><div id="plf-52" class="prl"></div><div id="plf-60" class="prl"></div><div id="plf-61" class="prl"></div><div id="plf-62" class="prl"></div><div id="plf-70" class="prl"></div><div id="plf-71" class="prl"></div><div id="plf-72" class="prl"></div><div id="plf-80" class="prl"></div><div id="plf-81" class="prl"></div><div id="plf-82" class="prl"></div><div id="plf-90" class="prl"></div><div id="plf-91" class="prl"></div><div id="plf-92" class="prl"></div>
   			<div class="p-t-20">
   				<div><span class="large-text" th:text="#{info.showdownIn}"></span></div>
   				<script>var myCountdown1 = new Countdown({ year:2013, month:5, day:30, hour:3, ampm:"pm", minute:0, second:0, rangeHi:"day", width:260, height:50, style:"flip" });</script>
   			</div>
   		</div>
   		</aside>
   		<aside id="left-box-bottom"><div id="news-updates-box"><span id="news-updates"></span></div></aside>
   		
   		<div id="left-box-contribute">
			<div id="bet-now">
			<a th:href="@{/contribueix}"><span class="w-s" th:text="#{view.contribute1}"></span><br /><strong><span class="w-s" th:text="#{view.contribute2}"></span></strong></a>
			</div>
		</div>
   		
   	</section>
   	
   	
   	
   	<!-- account information -->
   	<section id="user-section" th:fragment="userSection" sec:authorize="isAuthenticated()">
	   	<script th:inline="javascript">
	   	/*<![CDATA[*/
	   	//-----------------------------------------------------------------
	   	// account info
	   	//-----------------------------------------------------------------
	   	var accountInfoStr;
	   	function refreshAccountInfo() {
	   		var accountInfo = jQuery.parseJSON(accountInfoStr);
	   		for (var index in accountInfo) {
	   			var accountInfoBlock = accountInfo[index];
	   			var message = produceWSMessage(accountInfoBlock.message, accountInfoBlock.args);
	   			$("#" + accountInfoBlock.name).html(message);
	   		}
	   	}
	   	//-----------------------------------------------------------------
	   	// set up
	   	//-----------------------------------------------------------------
	   	$(document).ready(function() {
	   		accountInfoStr = /*[[${accountInfo}]]*/;
	   		refreshAccountInfo();
	   	});
	   	/*]]>*/
	   	</script>
	   	<div class="f-l">
	   		<div><span id="accountWelcome"></span></div>
			<div class="p-t-10"><span id="activeBetsAndKudos"></span></div>
		</div>
		<nav id="user-links" class="f-r">
			<div class="t-a-r"><a th:href="@{/sortir}"><span class="w-s" th:text="#{view.logout}"></span></a></div>
			<div class="p-t-10"><a th:href="@{/usuari}"><span class="w-s" th:text="#{view.makeABet}"></span></a></div>
		</nav>
	</section>
	
	
	<!-- warning box -->
	<section th:fragment="warnings" class="right-box" th:if="${errors}">
		<script th:inline="javascript">
	   	/*<![CDATA[*/
	   	//-----------------------------------------------------------------
	   	// warnings
	   	//-----------------------------------------------------------------
	   	var warningStr, warningsList;
		function initWarningsVars() {
			warningStr = /*[[${errors}]]*/;
			warningsList = $('#warnings-list');
		}
	   	function refreshWarnings() {
	   		var warningData = jQuery.parseJSON(warningStr);
	   		var newHtml = "";
	   		for (var index in warningData) {
	   			var warningDataBlock = warningData[index];
	   			var message = produceWSMessage(warningDataBlock.message, warningDataBlock.args);
	   			newHtml += wrapMessage(message, "<li>", "</li>");
	   		}
	   		warningsList.html(newHtml);
	   	}
	   	//-----------------------------------------------------------------
	   	// set up
	   	//-----------------------------------------------------------------
	   	$(document).ready(function() {
	   		initWarningsVars();
	   		refreshWarnings();
	   	});
	   	/*]]>*/
	   	</script>
		<div class="f-l"><img th:src="@{/static/img/warning.gif}" th:alt="#{info.warning}" /></div>
		<div class="err-msg"><ul id="warnings-list"></ul></div>
	</section>
	
	
	<section th:fragment="popularPlayersSection" th:if="${defaultLeaguePopularPlayers != '[]' and richestAccounts == 'null'}">
		<script th:inline="javascript">
	   	/*<![CDATA[*/
	   	//-----------------------------------------------------------------
	   	// most voted players
	   	//-----------------------------------------------------------------
	   	var leaguePopPlayersStr, popPlayersTitle, noPopPlayersTitle, votesStr;
	   	var mostPopTitle, mostPopTable;
	   	function initMostPopularPlayers() {
	   		leaguePopPlayersStr = /*[[${defaultLeaguePopularPlayers}]]*/;
		   	popPlayersTitle = /*[[#{view.popPlayersTitle}]]*/;
		   	noPopPlayersTitle = /*[[#{view.noPopPlayersTitle}]]*/;
		   	votesStr = /*[[#{view.votes}]]*/;
			mostPopTable = $('#most-pop-table');
			mostPopTitle = $('#most-pop-title');
	   	}
	   	function mvPlayerDataHtmlRow(mvPlayerData) {
	   		return "<tr><td class='m-p-t-r'><span>" + mvPlayerData.name + "<strong> (<span class='o-s'>" + mvPlayerData.handle + "</span>)</strong></span></td>" + 
	   			"<td><span><strong>" + mvPlayerData.popularity + "<span class='o-s'> " + votesStr + "</span></strong></span></td></tr>";
	   	}
	   	function refreshPopPlayersTable() {
	   		var mvPlayersData = jQuery.parseJSON(leaguePopPlayersStr);
	   		var popPlayersExist = !mvPlayersData || mvPlayersData.length != 0;
  	 		var title = popPlayersExist ? popPlayersTitle : noPopPlayersTitle;
	   	 	var newHtml = "";
	   		for (var index in mvPlayersData) {
	   			var mvPlayerData = mvPlayersData[index];
	   			newHtml += mvPlayerDataHtmlRow(mvPlayerData);
	   		}
	   		mostPopTitle.html(title);
	   		mostPopTable.html(newHtml);
  	 	}
	   	//-----------------------------------------------------------------
	   	// set up
	   	//-----------------------------------------------------------------
	   	$(document).ready(function() {
	   		initMostPopularPlayers();
	   		refreshPopPlayersTable();
	   	});
	   	/*]]>*/
	   	</script>
	   	<div class="a-bgb">
		<section id="most-pop-box">
			<div id="most-pop-title"></div>
			<div id="m-p-t-box">
			<table id="most-pop-table"></table>
		   	</div>
		</section>
		</div>
	</section>
	
	
	
	<section th:fragment="richestAccounts" th:if="${richestAccounts != 'null'}">
		<script th:inline="javascript">
	   	/*<![CDATA[*/
	   	//-----------------------------------------------------------------
	   	// most voted players
	   	//-----------------------------------------------------------------
	   	var richestAccountsStr;
	   	var richAccTable;
	   	function initRichestAccounts() {
	   		richestAccountsStr = /*[[${richestAccounts}]]*/;
		   	richAccTable = $('#rich-acc-table');
	   	}
	   	function richAccDataHtmlRow(richAccData) {
	   		return "<tr><td class='m-p-t-r'><strong><span>" + richAccData.left + "</span></strong></td>" + 
	   			"<td><span class='o-s'><strong>" + richAccData.right + "</span><span> kudos</span></strong></td></tr>";
	   	}
	   	function refreshRichAccTable() {
	   		var richAccsData = jQuery.parseJSON(richestAccountsStr);
	   		var newHtml = "";
	   		for (var index in richAccsData) {
	   			var richAccData = richAccsData[index];
	   			newHtml += richAccDataHtmlRow(richAccData);
	   		}
	   		richAccTable.html(newHtml);
  	 	}
	   	//-----------------------------------------------------------------
	   	// set up
	   	//-----------------------------------------------------------------
	   	$(document).ready(function() {
	   		initRichestAccounts();
	   		refreshRichAccTable();
	   	});
	   	/*]]>*/
	   	</script>
	   	<div class="a-bgb">
		<section id="most-pop-box">
			<div id="rich-acc-title"><span th:text="#{view.richAccTitle}"></span></div>
			<div id="m-p-t-box">
			<table id="rich-acc-table"></table>
		   	</div>
		</section>
		</div>
	</section>
   	
   	
	<aside id="back-box" th:fragment="backBox">
	<div class="t-a-c"><a th:href="@{/}"><span class="w-s" th:text="#{view.backHome}"></span></a></div>
	</aside>
	
   	
   	<!-- Peu -->
	<footer id="main-footer" th:fragment="footer">
	<div class="f-block">
		<nav class="f-s-14">
		<a th:href="@{/}"><span class="w-s" th:text="#{view.home}"></span></a> - 
		<a th:href="@{/faq}"><span class="w-s" th:text="#{view.faq}"></span></a> - 
		<a th:href="@{/contribueix}"><span class="w-s" th:text="#{view.contribute}"></span></a>
		</nav>
	</div>
	</footer>
	
	
	
</body>
</html>